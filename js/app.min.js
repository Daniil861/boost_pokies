(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",1e3),document.querySelector(".check")&&document.querySelectorAll(".check").forEach((e=>{e.textContent=sessionStorage.getItem("money")})),document.querySelector(".game")&&(+sessionStorage.getItem("money")>=50?(document.querySelector(".block-bet__coins").textContent=50,sessionStorage.setItem("current-bet",50)):(document.querySelector(".block-bet__coins").textContent=0,sessionStorage.setItem("current-bet",0)));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper");function s(e,t){document.querySelectorAll(e).forEach((e=>{e.classList.contains(t)&&e.classList.remove(t)}))}function c(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1500)}function r(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1e3)}function n(e,t){return Math.floor(Math.random()*(t-e)+e)}function i(e,t,o,s){let c=+sessionStorage.getItem("money")+e;setTimeout((()=>{sessionStorage.setItem("money",c),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}let l=document.querySelectorAll(".icon-anim img");function a(){sessionStorage.getItem("protect-1")>0?(document.querySelector(".protects__count_1").textContent=+sessionStorage.getItem("protect-1"),document.querySelector(".protects__item_1").classList.remove("_hold")):(document.querySelector(".protects__item_1").classList.add("_hold"),document.querySelector(".protects__count_1").textContent=0),sessionStorage.getItem("protect-2")>0?(document.querySelector(".protects__count_2").textContent=+sessionStorage.getItem("protect-2"),document.querySelector(".protects__item_2").classList.remove("_hold")):(document.querySelector(".protects__item_2").classList.add("_hold"),document.querySelector(".protects__count_2").textContent=0)}function m(e){document.querySelectorAll(".shield").forEach((e=>e.classList.add("_hold"))),document.querySelector(`.shield_${e}`).classList.remove("_hold")}function u(){let e=+sessionStorage.getItem("current-thing"),t=+sessionStorage.getItem("bot-thing");1==e&&2==t||2==e&&3==t||3==e&&1==t?(sessionStorage.setItem("result",1),setTimeout((()=>{i(2*+sessionStorage.getItem("current-bet"),".check",1e3,2e3)}),6e3)):2==e&&1==t||3==e&&2==t||1==e&&3==t?(sessionStorage.setItem("result",2),setTimeout((()=>{1==+sessionStorage.getItem("current-protect")?i(+sessionStorage.getItem("current-bet")/2,".check",1e3,2e3):2==+sessionStorage.getItem("current-protect")&&i(+sessionStorage.getItem("current-bet"),".check",1e3,2e3),sessionStorage.getItem("current-protect")&&document.querySelector(".actions-field__protect img").classList.add("_anim")}),6e3)):(sessionStorage.setItem("result",3),setTimeout((()=>{i(+sessionStorage.getItem("current-bet"),".check",1e3,2e3)}),6e3))}function d(){!function(){let e=n(1,4);sessionStorage.setItem("bot-thing",e)}(),sessionStorage.getItem("current-protect")&&(document.querySelector(".actions-field__protect").classList.add("_active"),1==+sessionStorage.getItem("current-protect")?document.querySelector(".actions-field__protect img").setAttribute("src","img/icons/shield-2.png"):2==+sessionStorage.getItem("current-protect")&&document.querySelector(".actions-field__protect img").setAttribute("src","img/icons/shield-3.png")),document.querySelector(".actions-field__coin-bet").textContent=+sessionStorage.getItem("current-bet"),function(){let e=+sessionStorage.getItem("current-thing");document.querySelector(".field__gif_1 img").setAttribute("src",`img/gif/player_${e}.gif`)}(),function(){let e=+sessionStorage.getItem("bot-thing");document.querySelector(".field__gif_2 img").setAttribute("src",`img/gif/enemy_${e}.gif`)}(),u(),1==+sessionStorage.getItem("result")?(document.querySelector(".field__button p").textContent="win",document.querySelector(".field__button-box").classList.add("_win")):2==+sessionStorage.getItem("result")?(document.querySelector(".field__button p").textContent="loose",document.querySelector(".field__button-box").classList.add("_loose")):3==+sessionStorage.getItem("result")&&(document.querySelector(".field__button p").textContent="draw",document.querySelector(".field__button-box").classList.add("_draw")),c(+sessionStorage.getItem("current-bet"),".check"),sessionStorage.getItem("current-protect")&&(1==+sessionStorage.getItem("current-protect")?sessionStorage.setItem("protect-1",+sessionStorage.getItem("protect-1")-1):2==+sessionStorage.getItem("current-protect")&&sessionStorage.setItem("protect-2",+sessionStorage.getItem("protect-2")-1)),a(),setTimeout((()=>{document.querySelector(".field__button-box").classList.add("_active"),function(){let e=+sessionStorage.getItem("current-thing"),t=+sessionStorage.getItem("bot-thing"),o=document.createElement("div");o.classList.add("history__item");let s=document.createElement("div");s.classList.add("history__player"),s.classList.add("history__player_1");let c=document.createElement("img");c.setAttribute("src",`img/icons/thing-${e}.png`),s.append(c);let r=document.createElement("div");r.classList.add("history__middle");let n=document.createElement("img");1==+sessionStorage.getItem("result")?n.setAttribute("src","img/icons/btn-green.png"):2==+sessionStorage.getItem("result")?n.setAttribute("src","img/icons/btn.png"):3==+sessionStorage.getItem("result")&&n.setAttribute("src","img/icons/btn-green.png"),r.append(n);let i=document.createElement("div");i.classList.add("history__player"),i.classList.add("history__player_2");let l=document.createElement("img");l.setAttribute("src",`img/icons/thing-${t}.png`),i.append(l),o.append(s,r,i),document.querySelector(".history__library").prepend(o)}()}),6e3)}document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=n(0,3),t=["jump","scale","rotate"],o=n(0,l.length);l.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{l[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),1e4),document.querySelector(".game")&&(a(),sessionStorage.getItem("current-thing")||sessionStorage.setItem("current-thing",2),m(+sessionStorage.getItem("current-thing")));const _=2500,g=5e3;document.querySelector(".shop")&&(document.querySelectorAll(".protect-shop__price")[0].textContent=_,document.querySelectorAll(".protect-shop__price")[1].textContent=g),document.addEventListener("click",(e=>{let n=e.target,i=+sessionStorage.getItem("current-bet"),l=+sessionStorage.getItem("money");n.closest(".background__button")&&1==n.closest(".background__button").dataset.btn&&(sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&document.querySelector(".main").classList.add("_active")),n.closest(".background__button")&&2==n.closest(".background__button").dataset.btn&&(location.href="game.html"),n.closest(".block-bet__minus")&&i>50&&(sessionStorage.setItem("current-bet",i-50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")),n.closest(".block-bet__plus")&&(l-49>i?(sessionStorage.setItem("current-bet",i+50),document.querySelector(".block-bet__coins").textContent=sessionStorage.getItem("current-bet")):r(".check")),n.closest(".shield")&&1==n.closest(".shield").dataset.thing&&(sessionStorage.setItem("current-thing",1),m(1)),n.closest(".shield")&&2==n.closest(".shield").dataset.thing&&(sessionStorage.setItem("current-thing",2),m(2)),n.closest(".shield")&&3==n.closest(".shield").dataset.thing&&(sessionStorage.setItem("current-thing",3),m(3)),n.closest(".protect-shop__price")&&1==n.closest(".protect-shop__price").dataset.price&&(+sessionStorage.getItem("money")>=_?(c(_,".check"),sessionStorage.getItem("protect-1")?sessionStorage.setItem("protect-1",+sessionStorage.getItem("protect-1")+1):sessionStorage.setItem("protect-1",1)):r(".check")),n.closest(".protect-shop__price")&&2==n.closest(".protect-shop__price").dataset.price&&(+sessionStorage.getItem("money")>=g?(c(g,".check"),sessionStorage.getItem("protect-2")?sessionStorage.setItem("protect-2",+sessionStorage.getItem("protect-2")+1):sessionStorage.setItem("protect-2",1)):r(".check")),n.closest(".protects__button")&&1==n.closest(".protects__button").dataset.protect&&(sessionStorage.setItem("current-protect",1),s(".protects__item","_selected"),n.closest(".protects__item").classList.add("_selected"),a()),n.closest(".protects__button")&&2==n.closest(".protects__button").dataset.protect&&(sessionStorage.setItem("current-protect",2),s(".protects__item","_selected"),n.closest(".protects__item").classList.add("_selected"),a()),n.closest(".shields-select__button-play")&&(document.querySelector(".background_game").classList.add("_hide"),document.querySelector(".battle").classList.remove("_hide"),d(),document.querySelectorAll(".field__heroe").forEach((e=>e.classList.add("_active")))),n.closest(".field__button")&&(document.querySelector(".background_game").classList.remove("_hide"),document.querySelector(".battle").classList.add("_hide"),document.querySelector(".actions-field__protect").classList.remove("_active"),document.querySelectorAll(".field__heroe").forEach((e=>e.classList.remove("_active"))),document.querySelector(".field__button-box").classList.remove("_active"),document.querySelectorAll(".protects__item").forEach((e=>e.classList.remove("_selected"))),document.querySelector(".field__button-box").classList.contains("_win")?document.querySelector(".field__button-box").classList.remove("_win"):document.querySelector(".field__button-box").classList.contains("_loose")?document.querySelector(".field__button-box").classList.remove("_loose"):document.querySelector(".field__button-box").classList.contains("_draw")&&document.querySelector(".field__button-box").classList.remove("_draw"),sessionStorage.removeItem("current-protect"),document.querySelector(".actions-field__protect img").classList.contains("_anim")&&document.querySelector(".actions-field__protect img").classList.remove("_anim"))})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();